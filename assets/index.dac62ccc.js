var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,s)=>{for(var o in s||(s={}))r.call(s,o)&&a(e,o,s[o]);if(t)for(var o of t(s))n.call(s,o)&&a(e,o,s[o]);return e};import{a as o,v as u,s as l,l as i,t as c,b as h,i as f,r as p,w as v,o as d,c as y,d as A,u as x,e as m,F as g,f as b,g as C,h as P,p as w,P as _,j as k}from"./vendor.cd3ae8d6.js";class S extends Error{constructor(e,t){super(e),this.info=t,Error.captureStackTrace&&Error.captureStackTrace(this,S)}}var j=Object.defineProperty,M=Object.getOwnPropertyDescriptor,O=(e,t,r,n)=>{for(var a,s=n>1?void 0:n?M(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n?a(t,r,s):a(s))||s);return n&&s&&j(t,r,s),s};const E=class{constructor(e=[],t,r){this.opts={},this.layerdStates=e,this.parent=t,this.name=r||(1===e.length?"<root>":"<anonymous>")}log(e,t){this.parent?this.parent.log(e,t):this.opts.log&&this.opts.log(e,t)}onUpdated(e,t){this.parent?this.parent.onUpdated(e,t):this.opts.onUpdated&&this.opts.onUpdated(e,t)}createChildScope(e=new Map,t){const r=[e,...this.layerdStates];return new E(r,this,t)}get(e){for(const t of this.layerdStates)if(t.has(e)){const r=t.get(e);return this.log("read",{var:e,val:r}),r}throw new S(`No such variable '${e}' in scope '${this.name}'`,{scope:this.layerdStates})}add(e,t){if(this.log("add",{var:e,val:t}),this.layerdStates[0].has(e))throw new S(`Variable '${e}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});this.layerdStates[0].set(e,t),null==this.parent&&this.onUpdated(e,t)}assign(e,t){let r=1;for(const n of this.layerdStates){if(n.has(e))return n.set(e,t),this.log("assign",{var:e,val:t}),void(r===this.layerdStates.length&&this.onUpdated(e,t));r++}throw new S(`No such variable '${e}' in scope '${this.name}'`,{scope:this.layerdStates})}};let $=E;O([o],$.prototype,"log",1),O([o],$.prototype,"onUpdated",1),O([o],$.prototype,"createChildScope",1),O([o],$.prototype,"get",1),O([o],$.prototype,"add",1),O([o],$.prototype,"assign",1);const N={type:"null"},D={type:"bool",value:!0},H={type:"bool",value:!1},q=e=>({type:"num",value:e}),F=e=>({type:"str",value:e}),I=e=>({type:"bool",value:e}),z=e=>({type:"obj",value:e}),U=e=>({type:"arr",value:e}),R=e=>({type:"fn",native:e});function T(e){if("bool"!==e.type)throw new S(`Expect boolean, but got ${e.type}.`)}function J(e){if("fn"!==e.type)throw new S(`Expect function, but got ${e.type}.`)}function Z(e){if("str"!==e.type)throw new S(`Expect string, but got ${e.type}.`)}function B(e){if("num"!==e.type)throw new S(`Expect number, but got ${e.type}.`)}function V(e){if("obj"!==e.type)throw new S(`Expect object, but got ${e.type}.`)}function L(e){if("arr"!==e.type)throw new S(`Expect array, but got ${e.type}.`)}function Y(e,t){return"fn"!==e.type&&"fn"!==t.type&&("null"===e.type&&"null"===t.type||"null"!==e.type&&"null"!==t.type&&e.value===t.value)}function G(e,t=!1){if(t){if("num"===e.type)return e.value;if("bool"===e.type)return e.value?"yes":"no";if("str"===e.type)return`"${e.value}"`;if("arr"===e.type)return`[${e.value.map((e=>G(e,!0))).join(", ")}]`;if("null"===e.type)return"(null)"}const r="num"===e.type||"bool"===e.type?e.value:"str"===e.type?`"${e.value}"`:"fn"===e.type||"obj"===e.type?"...":"null"===e.type?"":null;return`${e.type}<${r}>`}function K(e){switch(e.type){case"arr":return e.value.map((e=>K(e)));case"bool":return e.value;case"null":return null;case"num":return e.value;case"obj":{const t={};for(const[r,n]of e.value.entries())t[r]=K(n);return t}case"str":return e.value;default:return}}function Q(e){if(null===e)return N;if("boolean"==typeof e)return I(e);if("string"==typeof e)return F(e);if("number"==typeof e)return q(e);if(Array.isArray(e))return U(e.map((e=>Q(e))));if("object"==typeof e){const t=new Map;for(const[r,n]of Object.entries(e))t.set(r,Q(n));return z(t)}return N}const W={help:F("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":F("0.11.1"),"Core:ai":F("kawaii"),"Core:not":R((([e])=>(T(e),e.value?H:D))),"Core:eq":R((([e,t])=>Y(e,t)?D:H)),"Core:neq":R((([e,t])=>Y(e,t)?H:D)),"Core:and":R((([e,t])=>(T(e),T(t),e.value&&t.value?D:H))),"Core:or":R((([e,t])=>(T(e),T(t),e.value||t.value?D:H))),"Core:add":R((([e,t])=>(B(e),B(t),q(e.value+t.value)))),"Core:sub":R((([e,t])=>(B(e),B(t),q(e.value-t.value)))),"Core:mul":R((([e,t])=>(B(e),B(t),q(e.value*t.value)))),"Core:div":R((([e,t])=>{B(e),B(t);const r=e.value/t.value;if(isNaN(r))throw new S("Invalid operation.");return q(r)})),"Core:mod":R((([e,t])=>(B(e),B(t),q(e.value%t.value)))),"Core:gt":R((([e,t])=>(B(e),B(t),e.value>t.value?D:H))),"Core:lt":R((([e,t])=>(B(e),B(t),e.value<t.value?D:H))),"Core:gteq":R((([e,t])=>(B(e),B(t),e.value>=t.value?D:H))),"Core:lteq":R((([e,t])=>(B(e),B(t),e.value<=t.value?D:H))),"Core:type":R((([e])=>F(e.type))),"Core:to_str":R((([e])=>"str"===e.type?e:"num"===e.type?F(e.value.toString()):F("?"))),"Util:uuid":R((()=>F(u()))),"Json:stringify":R((([e])=>F(JSON.stringify(K(e))))),"Json:parse":R((([e])=>(Z(e),Q(JSON.parse(e.value))))),"Date:now":R((()=>q(Date.now()))),"Date:year":R((()=>q((new Date).getFullYear()))),"Date:month":R((()=>q((new Date).getMonth()+1))),"Date:day":R((()=>q((new Date).getDate()))),"Date:hour":R((()=>q((new Date).getHours()))),"Date:minute":R((()=>q((new Date).getMinutes()))),"Date:second":R((()=>q((new Date).getSeconds()))),"Date:parse":R((([e])=>(Z(e),q(new Date(e.value).getTime())))),"Math:PI":q(Math.PI),"Math:sin":R((([e])=>(B(e),q(Math.sin(e.value))))),"Math:cos":R((([e])=>(B(e),q(Math.cos(e.value))))),"Math:abs":R((([e])=>(B(e),q(Math.abs(e.value))))),"Math:sqrt":R((([e])=>{B(e);const t=Math.sqrt(e.value);if(isNaN(t))throw new S("Invalid operation.");return q(t)})),"Math:round":R((([e])=>(B(e),q(Math.round(e.value))))),"Math:floor":R((([e])=>(B(e),q(Math.floor(e.value))))),"Math:min":R((([e,t])=>(B(e),B(t),q(Math.min(e.value,t.value))))),"Math:max":R((([e,t])=>(B(e),B(t),q(Math.max(e.value,t.value))))),"Math:rnd":R((([e,t])=>e&&"num"===e.type&&t&&"num"===t.type?q(Math.floor(Math.random()*(t.value-e.value+1)+e.value)):q(Math.random()))),"Math:gen_rng":R((([e])=>{if("num"!==e.type&&"str"!==e.type)return N;const t=l(e.value.toString());return R((([e,r])=>e&&"num"===e.type&&r&&"num"===r.type?q(Math.floor(t()*(r.value-e.value+1)+e.value)):q(t())))})),"Num:to_hex":R((([e])=>(B(e),F(e.value.toString(16))))),"Num:from_hex":R((([e])=>(Z(e),q(parseInt(e.value,16))))),"Str:lf":F("\n"),"Str:to_num":R((([e])=>{if("num"===e.type)return e;if("str"===e.type){const t=parseInt(e.value,10);return isNaN(t)?N:q(t)}return N})),"Str:len":R((([e])=>"str"!==e.type?q(0):q(i(e.value)))),"Str:pick":R((([e,t])=>{Z(e),B(t);const r=c(e.value)[t.value-1];return r?F(r):N})),"Str:incl":R((([e,t])=>(Z(e),Z(t),e.value.includes(t.value)?D:H))),"Str:slice":R((([e,t,r])=>(Z(e),B(t),B(r),F(h(e.value,t.value-1,r.value-1))))),"Str:split":R((([e,t])=>(Z(e),t&&Z(t),U(t?e.value.split(t?t.value:"").map((e=>F(e))):c(e.value).map((e=>F(e))))))),"Str:replace":R((([e,t,r])=>(Z(e),Z(t),Z(r),F(e.value.split(t.value).join(r.value))))),"Str:index_of":R((([e,t])=>(Z(e),Z(t),q(f(e.value,t.value)+1)))),"Str:trim":R((([e])=>(Z(e),F(e.value.trim())))),"Str:upper":R((([e])=>(Z(e),F(e.value.toUpperCase())))),"Str:lower":R((([e])=>(Z(e),F(e.value.toLowerCase())))),"Arr:len":R((([e])=>"arr"!==e.type?q(0):q(e.value.length))),"Arr:push":R((([e,t])=>(L(e),e.value.push(t),N))),"Arr:unshift":R((([e,t])=>(L(e),e.value.unshift(t),N))),"Arr:pop":R((([e])=>(L(e),e.value.pop()))),"Arr:shift":R((([e])=>(L(e),e.value.shift()))),"Arr:concat":R((([e,t])=>(L(e),L(t),U(e.value.concat(t.value))))),"Arr:join":R((([e,t])=>(L(e),t&&Z(t),F(e.value.map((e=>"str"===e.type?e.value:"")).join(t?t.value:""))))),"Arr:slice":R((([e,t,r])=>(L(e),B(t),B(r),U(e.value.slice(t.value-1,r.value-1))))),"Arr:incl":R((([e,t])=>{if(L(e),"str"!==t.type&&"num"!==t.type&&"bool"!==t.type&&"null"!==t.type)return H;return(r=e,r.value.map((e=>"str"===e.type||"num"===e.type||"bool"===e.type?e.value:"null"===e.type?null:Symbol()))).includes("null"===t.type?null:t.value)?D:H;var r})),"Arr:map":R((async([e,t],r)=>{L(e),J(t);const n=e.value.map((async(e,n)=>await r.call(t,[e,q(n+1)])));return U(await Promise.all(n))})),"Arr:filter":R((async([e,t],r)=>{L(e),J(t);const n=[];for(let a=0;a<e.value.length;a++){const s=e.value[a],o=await r.call(t,[s,q(a+1)]);T(o),o.value&&n.push(s)}return U(n)})),"Arr:reduce":R((async([e,t,r],n)=>{L(e),J(t);const a=null!=r;let s=a?r:e.value[0];for(let o=a?0:1;o<e.value.length;o++){const r=e.value[o];s=await n.call(t,[s,r,q(o+1)])}return s})),"Arr:find":R((async([e,t],r)=>{L(e),J(t);for(let n=0;n<e.value.length;n++){const a=e.value[n],s=await r.call(t,[a,q(n+1)]);if(T(s),s.value)return a}return N})),"Arr:reverse":R((([e])=>(L(e),e.value.reverse(),N))),"Arr:copy":R((async([e])=>(L(e),U([...e.value])))),"Obj:keys":R((([e])=>(V(e),U(Array.from(e.value.keys()).map((e=>F(e))))))),"Obj:kvs":R((([e])=>(V(e),U(Array.from(e.value.entries()).map((([e,t])=>U([F(e),t]))))))),"Obj:get":R((([e,t])=>(V(e),Z(t),e.value.get(t.value)||N))),"Obj:set":R((([e,t,r])=>(V(e),Z(t),e.value.set(t.value,r),N))),"Obj:has":R((([e,t])=>(V(e),Z(t),I(e.value.has(t.value))))),"Obj:copy":R((([e])=>(V(e),z(new Map(e.value))))),"Async:interval":R((async([e,t,r],n)=>{B(e),J(t),r&&T(r),r&&n.call(t,[]);const a=setInterval((()=>{n.call(t,[])}),e.value),s=()=>{clearInterval(a)};return n.registerAbortHandler(s),R((([],e)=>{clearInterval(a),e.unregisterAbortHandler(s)}))})),"Async:timeout":R((async([e,t],r)=>{B(e),J(t);const n=setTimeout((()=>{r.call(t,[])}),e.value),a=()=>{clearTimeout(n)};return r.registerAbortHandler(a),R((([],e)=>{clearTimeout(n),e.unregisterAbortHandler(a)}))}))};var X=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,te=(e,t,r,n)=>{for(var a,s=n>1?void 0:n?ee(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n?a(t,r,s):a(s))||s);return n&&s&&X(t,r,s),s};class re{constructor(e,t){this.stepCount=0,this.stop=!1,this.abortHandlers=[],this.opts=t||{};const r={print:R((e=>{this.opts.out&&this.opts.out(e[0])})),readline:R((async e=>{const t=e[0];if(Z(t),null==this.opts.in)return N;const r=await this.opts.in(t.value);return F(r)}))};this.vars=s(s(s({},e),W),r),this.scope=new $([new Map(Object.entries(this.vars))]),this.scope.opts.log=(e,t)=>{switch(e){case"add":this.log("var:add",t);break;case"read":this.log("var:read",t);break;case"write":this.log("var:write",t)}}}async exec(e){if(null==e||0===e.length)return;await this.collectNs(e);const t=await this._run(e,this.scope);this.log("end",{val:t})}async execFn(e,t){return this._fn(e,t)}static collectMetadata(e){if(null==e||0===e.length)return;function t(e){switch(e.type){case"arr":return e.value.map((e=>t(e)));case"bool":return e.value;case"null":return null;case"num":return e.value;case"obj":{const r={};for(const[n,a]of e.value.entries())r[n]=t(a);return r}case"str":return e.value}}const r=new Map;for(const n of e)switch(n.type){case"meta":r.set(n.name,t(n.value))}return r}log(e,t){this.opts.log&&this.opts.log(e,t)}async collectNs(e){for(const t of e)switch(t.type){case"ns":await this.collectNsMember(t)}}async collectNsMember(e){const t=this.scope.createChildScope();for(const r of e.members)switch(r.type){case"def":{const n=await this._eval(r.expr,t);t.add(r.name,n),this.scope.add(e.name+":"+r.name,n);break}case"ns":break;default:throw new Error("invalid ns member type: "+r.type)}}async _fn(e,t){if(e.native){return await Promise.resolve(e.native(t,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler}))||N}{const n=new Map;for(let r=0;r<(e.args||[]).length;r++)n.set(e.args[r],t[r]);const a=e.scope.createChildScope(n);return"return"===(r=await this._run(e.statements,a)).type?r.value:r}var r}async _eval(e,t){if(this.stop)return N;if(this.log("node",{node:e}),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new S("max step exceeded");switch(e.type){case"call":{const r=t.get(e.name);J(r);const n=await Promise.all(e.args.map((async e=>await this._eval(e,t))));return this._fn(r,n)}case"if":{const r=await this._eval(e.cond,t);if(T(r),r.value)return this._eval(e.then,t);if(e.elseif&&e.elseif.length>0){for(const r of e.elseif){const e=await this._eval(r.cond,t);if(T(e),e.value)return this._eval(r.then,t)}if(e.else)return this._eval(e.else,t)}else if(e.else)return this._eval(e.else,t);return N}case"match":{const r=await this._eval(e.about,t);for(const n of e.qs){if(Y(r,await this._eval(n.q,t)))return await this._eval(n.a,t)}return e.default?await this._eval(e.default,t):N}case"loop":for(;;){if("break"===(await this._run(e.statements,t.createChildScope())).type)break}return N;case"for":if(e.times){const r=await this._eval(e.times,t);B(r);for(let n=1;n<r.value+1;n++){if("break"===(await this._eval(e.for,t)).type)break}}else{const r=await this._eval(e.from,t),n=await this._eval(e.to,t);B(r),B(n);for(let a=r.value+1;a<n.value+1;a++){if("break"===(await this._eval(e.for,t.createChildScope(new Map([[e.var,q(a)]])))).type)break}}return N;case"forOf":{const r=await this._eval(e.items,t);L(r);for(const n of r.value)await this._eval(e.for,t.createChildScope(new Map([[e.var,n]])));return N}case"def":return t.add(e.name,await this._eval(e.expr,t)),N;case"var":return t.get(e.name);case"assign":return t.assign(e.name,await this._eval(e.expr,t)),N;case"propAssign":{let r=t.get(e.obj);const n=e.path[e.path.length-1];for(const t of e.path.slice(0,e.path.length-1)){if(V(r),!r.value.has(t)){r=N;break}r=r.value.get(t)}return V(r),r.value.set(n,await this._eval(e.expr,t)),N}case"indexAssign":{const r=t.get(e.arr);L(r);const n=await this._eval(e.i,t);return B(n),r.value[n.value-1]=await this._eval(e.expr,t),N}case"inc":{const r=t.get(e.name);B(r);const n=await this._eval(e.expr,t);return B(n),r.value+=n.value,N}case"dec":{const r=t.get(e.name);B(r);const n=await this._eval(e.expr,t);return B(n),r.value-=n.value,N}case"null":return N;case"bool":return I(e.value);case"num":return q(e.value);case"str":return F(e.value);case"arr":return U(await Promise.all(e.value.map((async e=>await this._eval(e,t)))));case"obj":{const r=new Map;for(const n of e.value.keys())r.set(n,await this._eval(e.value.get(n),t));return z(r)}case"prop":{let r=t.get(e.obj);for(const t of e.path){if(V(r),!r.value.has(t)){r=N;break}r=r.value.get(t)}return r}case"propCall":{let r=t.get(e.obj);for(const t of e.path){if(V(r),!r.value.has(t)){r=N;break}r=r.value.get(t)}J(r);const n=await Promise.all(e.args.map((async e=>await this._eval(e,t))));return this._fn(r,n)}case"index":{const r=t.get(e.arr);L(r);const n=await this._eval(e.i,t);return B(n),r.value[n.value-1]}case"fn":return((e,t,r)=>({type:"fn",args:e,statements:t,scope:r}))(e.args,e.children,t);case"block":return this._run(e.statements,t.createChildScope());case"tmpl":{let r="";for(const n of e.tmpl)if("string"==typeof n)r+=n;else{const e=await this._eval(n,t);let a="";"str"===e.type?a=e.value:"num"===e.type&&(a=e.value.toString()),r+=a}return F(r)}case"infix":{let r=await this._eval(e.operands[0],t);for(let n=0;n<e.operators.length;n++){const a=await this._eval(e.operands[n+1],t),s=await this._eval(e.operators[n],t);J(s),r=await this._fn(s,[r,a])}return r}case"operator":switch(e.op){case"+":return t.get("Core:add");case"-":return t.get("Core:sub");case"*":return t.get("Core:mul");case"/":return t.get("Core:div");case"%":return t.get("Core:mod");case"=":return t.get("Core:eq");case"!=":return t.get("Core:neq");case"&":return t.get("Core:and");case"|":return t.get("Core:or");case"<":return t.get("Core:lt");case">":return t.get("Core:gt");case"<=":return t.get("Core:lteq");case">=":return t.get("Core:gteq");default:throw new S(`No such operator: ${e.op}.`)}case"return":{const r=await this._eval(e.expr,t);return this.log("block:return",{scope:t.name,val:r}),{type:"return",value:r}}case"break":return this.log("block:break",{scope:t.name}),{type:"break",value:null};case"continue":return this.log("block:continue",{scope:t.name}),{type:"continue",value:null};case"ns":case"meta":return N;default:throw new Error("invalid node type")}}async _run(e,t){this.log("block:enter",{scope:t.name});let r=N;for(let n=0;n<e.length;n++){const a=e[n];if(r=await this._eval(a,t),"return"===r.type)return this.log("block:return",{scope:t.name,val:r.value}),r;if("break"===r.type)return this.log("block:break",{scope:t.name}),r;if("continue"===r.type)return this.log("block:continue",{scope:t.name}),r}return this.log("block:leave",{scope:t.name,val:r}),r}registerAbortHandler(e){this.abortHandlers.push(e)}unregisterAbortHandler(e){this.abortHandlers=this.abortHandlers.filter((t=>t!=e))}abort(){this.stop=!0;for(const e of this.abortHandlers)e();this.abortHandlers=[]}}function ne(e,t,r,n){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,ne.prototype),a.expected=t,a.found=r,a.location=n,a.name="SyntaxError",a}function ae(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}te([o],re.prototype,"exec",1),te([o],re.prototype,"execFn",1),te([o],re.prototype,"log",1),te([o],re.prototype,"collectNs",1),te([o],re.prototype,"collectNsMember",1),te([o],re.prototype,"_fn",1),te([o],re.prototype,"_eval",1),te([o],re.prototype,"_run",1),te([o],re.prototype,"registerAbortHandler",1),te([o],re.prototype,"unregisterAbortHandler",1),te([o],re.prototype,"abort",1),te([o],re,"collectMetadata",1),function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(ne,Error),ne.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,s=this.location.source+":"+a.line+":"+a.column;if(n){var o=this.location.end,u=ae("",a.line.toString().length),l=n[a.line-1],i=a.line===o.line?o.column:l.length+1;t+="\n --\x3e "+s+"\n"+u+" |\n"+a.line+" | "+l+"\n"+u+" | "+ae("",a.column-1)+ae("",i-a.column,"^")}else t+="\n at "+s}return t},ne.buildMessage=function(e,t){var r,n={literal:function(e){return'"'+s(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function a(e){return e.charCodeAt(0).toString(16).toUpperCase()}function s(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function u(e){return n[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(u);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(((r=t)?'"'+s(r)+'"':"end of input")+" found.")},module.exports={SyntaxError:ne,parse:function e(t,r){var n,a,s,o,u={},l=(r=void 0!==r?r:{}).grammarSource,i={Entry:er,Core:function(){var e,t,r=69*Rt+3,n=Lt[r];if(n)return Rt=n.nextPos,n.result;e=Rt,Mr(),(t=rr())===u&&(t=null);return Mr(),Tt=e,e=xt(t),Lt[r]={nextPos:Rt,result:e},e}},c=er,h="//",f="(",p=")",v="{",d="}",y="###",A="#",x="=",m="<-",g="<:",b="<<<",C="+",P="~~",w=",",_="each",k="~",S="for",j="return",M="loop",O="break",E="continue",$=".",N="[",D="]",H="+<-",q="-<-",F="=>",I="if",z="elif",U="else",R="match",T="`",J="\\{",Z="\\}",B="\\`",V='"',L="yes",Y="no",G=":",K=";",Q="@(",W=/^[A-Z0-9_:]/i,X=/^[\-+*\/%&|=~<>!?]/,ee=/^[+\-]/,te=/^[1-9]/,re=/^[0-9]/,ae=/^[A-Z_]/i,se=/^[A-Z0-9_]/i,oe=/^[\r\n]/,ue=/^[ \t\r\n]/,le=/^[ \t]/,ie={type:"any"},ce=Gt("//",!1),he=Gt("(",!1),fe=Gt(")",!1),pe=Gt("::",!1),ve=Gt("{",!1),de=Gt("}",!1),ye=Gt("###",!1),Ae=Gt("#",!1),xe=Gt("=",!1),me=Gt("$",!1),ge=Gt("<-",!1),be=Gt("<:",!1),Ce=Gt("<<<",!1),Pe=Gt("+",!1),we=Gt("~~",!1),_e=Gt(",",!1),ke=Gt("each",!1),Se=Gt("~",!1),je=Gt("for",!1),Me=Gt("return",!1),Oe=Gt("loop",!1),Ee=Gt("break",!1),$e=Kt([["A","Z"],["0","9"],"_",":"],!1,!0),Ne=Gt("continue",!1),De=Gt(".",!1),He=Gt("[",!1),qe=Gt("]",!1),Fe=Gt("+<-",!1),Ie=Gt("-<-",!1),ze=Gt("=>",!1),Ue=Kt(["-","+","*","/","%","&","|","=","~","<",">","!","?"],!1,!1),Re=Gt("if",!1),Te=Gt("?",!1),Je=Gt("elif",!1),Ze=Gt("else",!1),Be=Gt("match",!1),Ve=Gt("*",!1),Le=Gt("`",!1),Ye=Gt("\\{",!1),Ge=Gt("\\}",!1),Ke=Gt("\\`",!1),Qe=Gt('"',!1),We=Gt('\\"',!1),Xe=Kt(["+","-"],!1,!1),et=Kt([["1","9"]],!1,!1),tt=Kt([["0","9"]],!1,!1),rt=Gt("yes",!1),nt=Gt("no",!1),at=Gt("-",!1),st=Gt("_",!1),ot=Gt(":",!1),ut=Gt(";",!1),lt=Gt("@",!1),it=Gt("@(",!1),ct=Kt([["A","Z"],"_"],!1,!0),ht=Kt([["A","Z"],["0","9"],"_"],!1,!0),ft=Gt("\r\n",!1),pt=Kt(["\r","\n"],!1,!1),vt=Kt([" ","\t","\r","\n"],!1,!1),dt=Kt([" ","\t"],!1,!1),yt=function(t){return e(t.join(""),(r="Core")?{startRule:r}:{});var r},At=function(){return Yt()},xt=function(e){return e||[]},mt=function(e,t){return t},gt=function(e,t){return[e,...t]},bt=function(e,t,r){return Nr("forOf",{var:e,items:t,for:r})},Ct=function(e,t){return t},Pt=function(e,t,r,n){return Nr("for",{var:e,from:t||Nr("num",{value:0}),to:r,for:n})},wt=function(e,t){return Nr("for",{times:e,for:t})},_t=function(e,t){return t},kt=function(e,t,r){return{o:t,t:r}},St=function(e,t,r){return r},jt=function(e,t,r,n){return n},Mt=function(e,t,r,n){return Nr("if",{cond:e,then:t,elseif:r||[],else:n})},Ot=function(e,t){return t},Et=function(e,t){return{cond:e,then:t}},$t=function(e,t,r){return{q:t,a:r}},Nt=function(e,t){return t},Dt=function(){return Yt()[1]},Ht=function(){return Nr("num",{value:parseInt(Yt(),10)})},qt=function(){return Nr("bool",{value:!0})},Ft=function(){return Nr("bool",{value:!1})},It=function(e,t){return{k:e,v:t}},zt=function(e){const t=new Map;for(const r of e)t.set(r.k,r.v);return Nr("obj",{value:t})},Ut=function(e){return Nr("arr",{value:e})},Rt=0,Tt=0,Jt=[{line:1,column:1}],Zt=0,Bt=[],Vt=0,Lt={};if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');c=i[r.startRule]}function Yt(){return t.substring(Tt,Rt)}function Gt(e,t){return{type:"literal",text:e,ignoreCase:t}}function Kt(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function Qt(e){var r,n=Jt[e];if(n)return n;for(r=e-1;!Jt[r];)r--;for(n={line:(n=Jt[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Jt[e]=n,n}function Wt(e,t){var r=Qt(e),n=Qt(t);return{source:l,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function Xt(e){Rt<Zt||(Rt>Zt&&(Zt=Rt,Bt=[]),Bt.push(e))}function er(){var e,t,r,n=69*Rt+0,a=Lt[n];if(a)return Rt=a.nextPos,a.result;for(e=Rt,t=[],r=tr();r!==u;)t.push(r),r=tr();return Tt=e,e=t=yt(t),Lt[n]={nextPos:Rt,result:e},e}function tr(){var e,r,n=69*Rt+1,a=Lt[n];return a?(Rt=a.nextPos,a.result):(e=Rt,(r=Ar())!==u&&(Tt=e,r=At()),(e=r)===u&&(e=Rt,(r=mr())!==u&&(Tt=e,r=At()),(e=r)===u&&(e=Rt,(r=function(){var e,r,n,a,s,o,l=69*Rt+2,i=Lt[l];if(i)return Rt=i.nextPos,i.result;e=Rt,t.substr(Rt,2)===h?(r=h,Rt+=2):(r=u,0===Vt&&Xt(ce));if(r!==u){for(n=[],a=Rt,s=Rt,Vt++,o=jr(),Vt--,o===u?s=void 0:(Rt=s,s=u),s!==u?(t.length>Rt?(o=t.charAt(Rt),Rt++):(o=u,0===Vt&&Xt(ie)),o!==u?a=s=[s,o]:(Rt=a,a=u)):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,s=Rt,Vt++,o=jr(),Vt--,o===u?s=void 0:(Rt=s,s=u),s!==u?(t.length>Rt?(o=t.charAt(Rt),Rt++):(o=u,0===Vt&&Xt(ie)),o!==u?a=s=[s,o]:(Rt=a,a=u)):(Rt=a,a=u);e=r=[r,n]}else Rt=e,e=u;return Lt[l]={nextPos:Rt,result:e},e}())!==u&&(Tt=e,r=""),(e=r)===u&&(t.length>Rt?(e=t.charAt(Rt),Rt++):(e=u,0===Vt&&Xt(ie))))),Lt[n]={nextPos:Rt,result:e},e)}function rr(){var e,t,r,n,a,s=69*Rt+4,o=Lt[s];if(o)return Rt=o.nextPos,o.result;if(e=Rt,(t=ar())!==u){for(r=[],n=Rt,Er()!==u&&(a=ar())!==u?(Tt=n,n=mt(0,a)):(Rt=n,n=u);n!==u;)r.push(n),n=Rt,Er()!==u&&(a=ar())!==u?(Tt=n,n=mt(0,a)):(Rt=n,n=u);Tt=e,e=gt(t,r)}else Rt=e,e=u;return Lt[s]={nextPos:Rt,result:e},e}function nr(){var e,t,r,n,a,s=69*Rt+5,o=Lt[s];if(o)return Rt=o.nextPos,o.result;if(e=Rt,(t=sr())!==u){for(r=[],n=Rt,Er()!==u&&(a=sr())!==u?(Tt=n,n=mt(0,a)):(Rt=n,n=u);n!==u;)r.push(n),n=Rt,Er()!==u&&(a=sr())!==u?(Tt=n,n=mt(0,a)):(Rt=n,n=u);Tt=e,e=gt(t,r)}else Rt=e,e=u;return Lt[s]={nextPos:Rt,result:e},e}function ar(){var e,r=69*Rt+6,n=Lt[r];return n?(Rt=n.nextPos,n.result):((e=ir())===u&&(e=function(){var e,r,n,a,s=69*Rt+15,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,t.substr(Rt,3)===y?(r=y,Rt+=3):(r=u,0===Vt&&Xt(ye));r!==u?(Or(),(n=kr())!==u?(Mr(),(a=lr())!==u?(Tt=e,e=Nr("meta",{name:n,value:a})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);e===u&&(e=Rt,t.substr(Rt,3)===y?(r=y,Rt+=3):(r=u,0===Vt&&Xt(ye)),r!==u?(Or(),(n=lr())!==u?(Tt=e,e=function(e){return Nr("meta",{name:null,value:e})}(n)):(Rt=e,e=u)):(Rt=e,e=u));return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=sr()),Lt[r]={nextPos:Rt,result:e},e)}function sr(){var e,r=69*Rt+7,n=Lt[r];return n?(Rt=n.nextPos,n.result):((e=hr())===u&&(e=_r())===u&&(e=function(){var e,r,n,a=69*Rt+17,s=Lt[a];if(s)return Rt=s.nextPos,s.result;e=Rt,t.substr(Rt,2)===g?(r=g,Rt+=2):(r=u,0===Vt&&Xt(be));r!==u?(Mr(),(n=or())!==u?(Tt=e,e=Nr("call",{name:"print",args:[n]})):(Rt=e,e=u)):(Rt=e,e=u);return Lt[a]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a=69*Rt+18,s=Lt[a];if(s)return Rt=s.nextPos,s.result;e=Rt,t.substr(Rt,3)===b?(r=b,Rt+=3):(r=u,0===Vt&&Xt(Ce));r!==u?(Mr(),(n=or())!==u?(Tt=e,e=Nr("debug",{expr:n})):(Rt=e,e=u)):(Rt=e,e=u);return Lt[a]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a=69*Rt+22,s=Lt[a];if(s)return Rt=s.nextPos,s.result;e=Rt,t.substr(Rt,6)===j?(r=j,Rt+=6):(r=u,0===Vt&&Xt(Me));r!==u?(Mr(),(n=or())!==u?(Tt=e,e=Nr("return",{expr:n})):(Rt=e,e=u)):(Rt=e,e=u);return Lt[a]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s=69*Rt+19,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,43===t.charCodeAt(Rt)?(r="+",Rt++):(r=u,0===Vt&&Xt(Pe));r!==u?(Or(),(n=kr())!==u?(Mr(),(a=lr())!==u?(Tt=e,e=Nr("attr",{name:n,value:a})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l,i,c,h=69*Rt+20,v=Lt[h];if(v)return Rt=v.nextPos,v.result;e=Rt,t.substr(Rt,2)===P?(r=P,Rt+=2):(r=u,0===Vt&&Xt(we));r!==u?(Mr(),40===t.charCodeAt(Rt)?(n=f,Rt++):(n=u,0===Vt&&Xt(he)),n!==u?(35===t.charCodeAt(Rt)?(a=A,Rt++):(a=u,0===Vt&&Xt(Ae)),a!==u&&(s=kr())!==u?(Mr(),44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),o=Mr(),(l=or())!==u?(41===t.charCodeAt(Rt)?(i=p,Rt++):(i=u,0===Vt&&Xt(fe)),i!==u?(Mr(),(c=sr())!==u?(Tt=e,e=bt(s,l,c)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);e===u&&(e=Rt,t.substr(Rt,2)===P?(r=P,Rt+=2):(r=u,0===Vt&&Xt(we)),r!==u&&Er()!==u?(35===t.charCodeAt(Rt)?(n=A,Rt++):(n=u,0===Vt&&Xt(Ae)),n!==u&&(a=kr())!==u?(s=Mr(),44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Mr(),(o=or())!==u&&(l=Er())!==u&&(i=sr())!==u?(Tt=e,e=bt(a,o,i)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(e=Rt,t.substr(Rt,4)===_?(r=_,Rt+=4):(r=u,0===Vt&&Xt(ke)),r!==u?(Mr(),40===t.charCodeAt(Rt)?(n=f,Rt++):(n=u,0===Vt&&Xt(he)),n!==u?(35===t.charCodeAt(Rt)?(a=A,Rt++):(a=u,0===Vt&&Xt(Ae)),a!==u&&(s=kr())!==u?(Mr(),44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),o=Mr(),(l=or())!==u?(41===t.charCodeAt(Rt)?(i=p,Rt++):(i=u,0===Vt&&Xt(fe)),i!==u?(Mr(),(c=sr())!==u?(Tt=e,e=bt(s,l,c)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(e=Rt,t.substr(Rt,4)===_?(r=_,Rt+=4):(r=u,0===Vt&&Xt(ke)),r!==u&&Er()!==u?(35===t.charCodeAt(Rt)?(n=A,Rt++):(n=u,0===Vt&&Xt(Ae)),n!==u&&(a=kr())!==u?(s=Mr(),44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Mr(),(o=or())!==u&&(l=Er())!==u&&(i=sr())!==u?(Tt=e,e=bt(a,o,i)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u))));return Lt[h]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l,i,c,h,v,d,y=69*Rt+21,m=Lt[y];if(m)return Rt=m.nextPos,m.result;e=Rt,126===t.charCodeAt(Rt)?(r=k,Rt++):(r=u,0===Vt&&Xt(Se));r!==u?(Mr(),40===t.charCodeAt(Rt)?(n=f,Rt++):(n=u,0===Vt&&Xt(he)),n!==u?(35===t.charCodeAt(Rt)?(a=A,Rt++):(a=u,0===Vt&&Xt(Ae)),a!==u&&(s=kr())!==u?(o=Mr(),l=Rt,61===t.charCodeAt(Rt)?(i=x,Rt++):(i=u,0===Vt&&Xt(xe)),i!==u?(c=Mr(),(h=or())!==u?(Tt=l,l=Ct(0,h)):(Rt=l,l=u)):(Rt=l,l=u),l===u&&(l=null),44===t.charCodeAt(Rt)?(i=w,Rt++):(i=u,0===Vt&&Xt(_e)),i===u&&(i=null),c=Mr(),(h=or())!==u?(41===t.charCodeAt(Rt)?(v=p,Rt++):(v=u,0===Vt&&Xt(fe)),v!==u?(Mr(),(d=sr())!==u?(Tt=e,e=Pt(s,l,h,d)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);e===u&&(e=Rt,126===t.charCodeAt(Rt)?(r=k,Rt++):(r=u,0===Vt&&Xt(Se)),r!==u&&Er()!==u?(35===t.charCodeAt(Rt)?(n=A,Rt++):(n=u,0===Vt&&Xt(Ae)),n!==u&&(a=kr())!==u?(s=Mr(),o=Rt,61===t.charCodeAt(Rt)?(l=x,Rt++):(l=u,0===Vt&&Xt(xe)),l!==u?(i=Mr(),(c=or())!==u?(Tt=o,o=Ct(0,c)):(Rt=o,o=u)):(Rt=o,o=u),o===u&&(o=null),44===t.charCodeAt(Rt)?(l=w,Rt++):(l=u,0===Vt&&Xt(_e)),l===u&&(l=null),i=Mr(),(c=or())!==u&&(h=Er())!==u&&(v=sr())!==u?(Tt=e,e=Pt(a,o,c,v)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(e=Rt,126===t.charCodeAt(Rt)?(r=k,Rt++):(r=u,0===Vt&&Xt(Se)),r!==u?(Mr(),40===t.charCodeAt(Rt)?(n=f,Rt++):(n=u,0===Vt&&Xt(he)),n!==u&&(a=or())!==u?(41===t.charCodeAt(Rt)?(s=p,Rt++):(s=u,0===Vt&&Xt(fe)),s!==u?(o=Mr(),(l=sr())!==u?(Tt=e,e=wt(a,l)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(e=Rt,126===t.charCodeAt(Rt)?(r=k,Rt++):(r=u,0===Vt&&Xt(Se)),r!==u&&Er()!==u&&(n=or())!==u&&(a=Er())!==u&&(s=sr())!==u?(Tt=e,e=wt(n,s)):(Rt=e,e=u),e===u&&(e=Rt,t.substr(Rt,3)===S?(r=S,Rt+=3):(r=u,0===Vt&&Xt(je)),r!==u?(Mr(),40===t.charCodeAt(Rt)?(n=f,Rt++):(n=u,0===Vt&&Xt(he)),n!==u?(35===t.charCodeAt(Rt)?(a=A,Rt++):(a=u,0===Vt&&Xt(Ae)),a!==u&&(s=kr())!==u?(o=Mr(),l=Rt,61===t.charCodeAt(Rt)?(i=x,Rt++):(i=u,0===Vt&&Xt(xe)),i!==u?(c=Mr(),(h=or())!==u?(Tt=l,l=Ct(0,h)):(Rt=l,l=u)):(Rt=l,l=u),l===u&&(l=null),44===t.charCodeAt(Rt)?(i=w,Rt++):(i=u,0===Vt&&Xt(_e)),i===u&&(i=null),c=Mr(),(h=or())!==u?(41===t.charCodeAt(Rt)?(v=p,Rt++):(v=u,0===Vt&&Xt(fe)),v!==u?(Mr(),(d=sr())!==u?(Tt=e,e=Pt(s,l,h,d)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(e=Rt,t.substr(Rt,3)===S?(r=S,Rt+=3):(r=u,0===Vt&&Xt(je)),r!==u&&Er()!==u?(35===t.charCodeAt(Rt)?(n=A,Rt++):(n=u,0===Vt&&Xt(Ae)),n!==u&&(a=kr())!==u?(s=Mr(),o=Rt,61===t.charCodeAt(Rt)?(l=x,Rt++):(l=u,0===Vt&&Xt(xe)),l!==u?(i=Mr(),(c=or())!==u?(Tt=o,o=Ct(0,c)):(Rt=o,o=u)):(Rt=o,o=u),o===u&&(o=null),44===t.charCodeAt(Rt)?(l=w,Rt++):(l=u,0===Vt&&Xt(_e)),l===u&&(l=null),i=Mr(),(c=or())!==u&&(h=Er())!==u&&(v=sr())!==u?(Tt=e,e=Pt(a,o,c,v)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(e=Rt,t.substr(Rt,3)===S?(r=S,Rt+=3):(r=u,0===Vt&&Xt(je)),r!==u?(Mr(),40===t.charCodeAt(Rt)?(n=f,Rt++):(n=u,0===Vt&&Xt(he)),n!==u&&(a=or())!==u?(41===t.charCodeAt(Rt)?(s=p,Rt++):(s=u,0===Vt&&Xt(fe)),s!==u?(o=Mr(),(l=sr())!==u?(Tt=e,e=wt(a,l)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(e=Rt,t.substr(Rt,3)===S?(r=S,Rt+=3):(r=u,0===Vt&&Xt(je)),r!==u&&Er()!==u&&(n=or())!==u&&(a=Er())!==u&&(s=sr())!==u?(Tt=e,e=wt(n,s)):(Rt=e,e=u))))))));return Lt[y]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o=69*Rt+23,l=Lt[o];if(l)return Rt=l.nextPos,l.result;e=Rt,t.substr(Rt,4)===M?(r=M,Rt+=4):(r=u,0===Vt&&Xt(Oe));r!==u?(Mr(),123===t.charCodeAt(Rt)?(n=v,Rt++):(n=u,0===Vt&&Xt(ve)),n!==u?(Mr(),(a=nr())!==u?(Mr(),125===t.charCodeAt(Rt)?(s=d,Rt++):(s=u,0===Vt&&Xt(de)),s!==u?(Tt=e,e=Nr("loop",{statements:a})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[o]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s=69*Rt+24,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,t.substr(Rt,5)===O?(r=O,Rt+=5):(r=u,0===Vt&&Xt(Ee));r!==u?(n=Rt,Vt++,W.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt($e)),Vt--,a===u?n=void 0:(Rt=n,n=u),n!==u?(Tt=e,e=Nr("break",{})):(Rt=e,e=u)):(Rt=e,e=u);return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s=69*Rt+25,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,t.substr(Rt,8)===E?(r=E,Rt+=8):(r=u,0===Vt&&Xt(Ne));r!==u?(n=Rt,Vt++,W.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt($e)),Vt--,a===u?n=void 0:(Rt=n,n=u),n!==u?(Tt=e,e=Nr("continue",{})):(Rt=e,e=u)):(Rt=e,e=u);return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s=69*Rt+26,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,(r=Sr())!==u?(Mr(),t.substr(Rt,2)===m?(n=m,Rt+=2):(n=u,0===Vt&&Xt(ge)),n!==u?(Mr(),(a=or())!==u?(Tt=e,e=Nr("assign",{name:r,expr:a})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l,i=69*Rt+27,c=Lt[i];if(c)return Rt=c.nextPos,c.result;if(e=Rt,(r=Sr())!==u){if(n=[],a=Rt,46===t.charCodeAt(Rt)?(s=$,Rt++):(s=u,0===Vt&&Xt(De)),s!==u&&(o=kr())!==u?(Tt=a,a=_t(0,o)):(Rt=a,a=u),a!==u)for(;a!==u;)n.push(a),a=Rt,46===t.charCodeAt(Rt)?(s=$,Rt++):(s=u,0===Vt&&Xt(De)),s!==u&&(o=kr())!==u?(Tt=a,a=_t(0,o)):(Rt=a,a=u);else n=u;n!==u?(a=Mr(),t.substr(Rt,2)===m?(s=m,Rt+=2):(s=u,0===Vt&&Xt(ge)),s!==u?(o=Mr(),(l=or())!==u?(Tt=e,e=Nr("propAssign",{obj:r,path:n,expr:l})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)}else Rt=e,e=u;return Lt[i]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l,i=69*Rt+28,c=Lt[i];if(c)return Rt=c.nextPos,c.result;e=Rt,(r=Sr())!==u?(91===t.charCodeAt(Rt)?(n=N,Rt++):(n=u,0===Vt&&Xt(He)),n!==u?(Mr(),(a=or())!==u?(Mr(),93===t.charCodeAt(Rt)?(s=D,Rt++):(s=u,0===Vt&&Xt(qe)),s!==u?(Mr(),t.substr(Rt,2)===m?(o=m,Rt+=2):(o=u,0===Vt&&Xt(ge)),o!==u?(Mr(),(l=or())!==u?(Tt=e,e=Nr("indexAssign",{arr:r,i:a,expr:l})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[i]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s=69*Rt+29,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,(r=Sr())!==u?(Mr(),t.substr(Rt,3)===H?(n=H,Rt+=3):(n=u,0===Vt&&Xt(Fe)),n!==u?(Mr(),(a=or())!==u?(Tt=e,e=Nr("inc",{name:r,expr:a})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s=69*Rt+30,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,(r=Sr())!==u?(Mr(),t.substr(Rt,3)===q?(n=q,Rt+=3):(n=u,0===Vt&&Xt(Ie)),n!==u?(Mr(),(a=or())!==u?(Tt=e,e=Nr("dec",{name:r,expr:a})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=or()),Lt[r]={nextPos:Rt,result:e},e)}function or(){var e,t=69*Rt+8,r=Lt[t];return r?(Rt=r.nextPos,r.result):((e=function(){var e,t,r,n,a,s,o=69*Rt+31,l=Lt[o];if(l)return Rt=l.nextPos,l.result;if(e=Rt,(t=ur())!==u){if(r=[],n=Rt,Mr(),(a=fr())!==u?(Mr(),(s=ur())!==u?(Tt=n,n=kt(0,a,s)):(Rt=n,n=u)):(Rt=n,n=u),n!==u)for(;n!==u;)r.push(n),n=Rt,Mr(),(a=fr())!==u?(Mr(),(s=ur())!==u?(Tt=n,n=kt(0,a,s)):(Rt=n,n=u)):(Rt=n,n=u);else r=u;r!==u?(Tt=e,e=Nr("infix",{operands:[t,...(i=r).map((e=>e.t))],operators:i.map((e=>e.o))})):(Rt=e,e=u)}else Rt=e,e=u;var i;return Lt[o]={nextPos:Rt,result:e},e}())===u&&(e=ur()),Lt[t]={nextPos:Rt,result:e},e)}function ur(){var e,r,n,a,s=69*Rt+9,o=Lt[s];return o?(Rt=o.nextPos,o.result):((e=function(){var e,r,n,a,s,o,l,i,c=69*Rt+34,h=Lt[c];if(h)return Rt=h.nextPos,h.result;e=Rt,t.substr(Rt,2)===I?(r=I,Rt+=2):(r=u,0===Vt&&Xt(Re));r!==u&&Er()!==u&&(n=or())!==u&&Er()!==u&&(a=sr())!==u?(s=Rt,(o=Er())!==u&&(l=pr())!==u?(Tt=s,s=St(0,0,l)):(Rt=s,s=u),s===u&&(s=null),o=Rt,(l=Er())!==u&&(i=dr())!==u?(Tt=o,o=jt(0,0,0,i)):(Rt=o,o=u),o===u&&(o=null),Tt=e,e=Mt(n,a,s,o)):(Rt=e,e=u);e===u&&(e=Rt,63===t.charCodeAt(Rt)?(r="?",Rt++):(r=u,0===Vt&&Xt(Te)),r!==u&&Er()!==u&&(n=or())!==u&&Er()!==u&&(a=or())!==u?(s=Rt,(o=Er())!==u&&(l=pr())!==u?(Tt=s,s=St(0,0,l)):(Rt=s,s=u),s===u&&(s=null),o=Rt,(l=Er())!==u&&(i=dr())!==u?(Tt=o,o=jt(0,0,0,i)):(Rt=o,o=u),o===u&&(o=null),Tt=e,e=Mt(n,a,s,o)):(Rt=e,e=u));return Lt[c]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l,i=69*Rt+60,c=Lt[i];if(c)return Rt=c.nextPos,c.result;e=Rt,t.substr(Rt,2)===Q?(r=Q,Rt+=2):(r=u,0===Vt&&Xt(it));r!==u?(Mr(),(n=wr())===u&&(n=null),Mr(),41===t.charCodeAt(Rt)?(a=p,Rt++):(a=u,0===Vt&&Xt(fe)),a!==u?(Mr(),123===t.charCodeAt(Rt)?(s=v,Rt++):(s=u,0===Vt&&Xt(ve)),s!==u?(Mr(),(o=nr())===u&&(o=null),Mr(),125===t.charCodeAt(Rt)?(l=d,Rt++):(l=u,0===Vt&&Xt(de)),l!==u?(Tt=e,e=Nr("fn",{args:n},o||[])):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[i]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l,i,c,h,f=69*Rt+38,p=Lt[f];if(p)return Rt=p.nextPos,p.result;e=Rt,t.substr(Rt,5)===R?(r=R,Rt+=5):(r=u,0===Vt&&Xt(Be));if(r!==u)if(Mr(),(n=or())!==u)if(Mr(),123===t.charCodeAt(Rt)?(a=v,Rt++):(a=u,0===Vt&&Xt(ve)),a!==u){if(Mr(),s=[],o=Rt,(l=or())!==u?(i=Mr(),t.substr(Rt,2)===F?(c=F,Rt+=2):(c=u,0===Vt&&Xt(ze)),c!==u?(Mr(),(h=or())!==u?(Mr(),Tt=o,o=$t(0,l,h)):(Rt=o,o=u)):(Rt=o,o=u)):(Rt=o,o=u),o!==u)for(;o!==u;)s.push(o),o=Rt,(l=or())!==u?(i=Mr(),t.substr(Rt,2)===F?(c=F,Rt+=2):(c=u,0===Vt&&Xt(ze)),c!==u?(Mr(),(h=or())!==u?(Mr(),Tt=o,o=$t(0,l,h)):(Rt=o,o=u)):(Rt=o,o=u)):(Rt=o,o=u);else s=u;s!==u?(o=Rt,42===t.charCodeAt(Rt)?(l="*",Rt++):(l=u,0===Vt&&Xt(Ve)),l!==u?(i=Mr(),t.substr(Rt,2)===F?(c=F,Rt+=2):(c=u,0===Vt&&Xt(ze)),c!==u?(Mr(),(h=or())!==u?(Mr(),Tt=o,o=h):(Rt=o,o=u)):(Rt=o,o=u)):(Rt=o,o=u),o===u&&(o=null),l=Mr(),125===t.charCodeAt(Rt)?(i=d,Rt++):(i=u,0===Vt&&Xt(de)),i!==u?(Tt=e,e=Nr("match",{about:n,qs:s||[],default:o})):(Rt=e,e=u)):(Rt=e,e=u)}else Rt=e,e=u;else Rt=e,e=u;else Rt=e,e=u;return Lt[f]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s=69*Rt+39,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,123===t.charCodeAt(Rt)?(r=v,Rt++):(r=u,0===Vt&&Xt(ve));r!==u?(Mr(),(n=nr())!==u?(Mr(),125===t.charCodeAt(Rt)?(a=d,Rt++):(a=u,0===Vt&&Xt(de)),a!==u?(Tt=e,e=Nr("block",{statements:n})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r=69*Rt+10,n=Lt[r];if(n)return Rt=n.nextPos,n.result;(e=Ar())===u&&(e=mr())===u&&(e=br())===u&&(e=Cr())===u&&(e=Pr())===u&&(e=function(){var e,r,n,a,s,o,l,i,c=69*Rt+56,h=Lt[c];if(h)return Rt=h.nextPos,h.result;e=Rt,123===t.charCodeAt(Rt)?(r=v,Rt++):(r=u,0===Vt&&Xt(ve));if(r!==u){for(Mr(),n=[],a=Rt,(s=kr())!==u?(Mr(),58===t.charCodeAt(Rt)?(o=G,Rt++):(o=u,0===Vt&&Xt(ot)),o!==u&&Er()!==u&&(l=or())!==u?(Mr(),44===t.charCodeAt(Rt)?(i=w,Rt++):(i=u,0===Vt&&Xt(_e)),i===u&&(59===t.charCodeAt(Rt)?(i=K,Rt++):(i=u,0===Vt&&Xt(ut))),i===u&&(i=null),Mr(),Tt=a,a=It(s,l)):(Rt=a,a=u)):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,(s=kr())!==u?(Mr(),58===t.charCodeAt(Rt)?(o=G,Rt++):(o=u,0===Vt&&Xt(ot)),o!==u&&Er()!==u&&(l=or())!==u?(Mr(),44===t.charCodeAt(Rt)?(i=w,Rt++):(i=u,0===Vt&&Xt(_e)),i===u&&(59===t.charCodeAt(Rt)?(i=K,Rt++):(i=u,0===Vt&&Xt(ut))),i===u&&(i=null),Mr(),Tt=a,a=It(s,l)):(Rt=a,a=u)):(Rt=a,a=u);125===t.charCodeAt(Rt)?(a=d,Rt++):(a=u,0===Vt&&Xt(de)),a!==u?(Tt=e,e=zt(n)):(Rt=e,e=u)}else Rt=e,e=u;return Lt[c]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o=69*Rt+57,l=Lt[o];if(l)return Rt=l.nextPos,l.result;e=Rt,91===t.charCodeAt(Rt)?(r=N,Rt++):(r=u,0===Vt&&Xt(He));if(r!==u){for(Mr(),n=[],a=Rt,(s=or())!==u?(Mr(),44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Mr(),Tt=a,a=s):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,(s=or())!==u?(Mr(),44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Mr(),Tt=a,a=s):(Rt=a,a=u);a=Mr(),93===t.charCodeAt(Rt)?(s=D,Rt++):(s=u,0===Vt&&Xt(qe)),s!==u?(Tt=e,e=Ut(n)):(Rt=e,e=u)}else Rt=e,e=u;return Lt[o]={nextPos:Rt,result:e},e}());return Lt[r]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o=69*Rt+40,l=Lt[o];if(l)return Rt=l.nextPos,l.result;e=Rt,(r=Sr())!==u?(40===t.charCodeAt(Rt)?(n=f,Rt++):(n=u,0===Vt&&Xt(he)),n!==u?(Mr(),(a=yr())===u&&(a=null),Mr(),41===t.charCodeAt(Rt)?(s=p,Rt++):(s=u,0===Vt&&Xt(fe)),s!==u?(Tt=e,e=Nr("call",{name:r,args:a||[]})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[o]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o=69*Rt+42,l=Lt[o];if(l)return Rt=l.nextPos,l.result;e=Rt,(r=Sr())!==u?(91===t.charCodeAt(Rt)?(n=N,Rt++):(n=u,0===Vt&&Xt(He)),n!==u?(Mr(),(a=or())!==u?(Mr(),93===t.charCodeAt(Rt)?(s=D,Rt++):(s=u,0===Vt&&Xt(qe)),s!==u?(Tt=e,e=Nr("index",{arr:r,i:a})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u);return Lt[o]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l,i=69*Rt+43,c=Lt[i];if(c)return Rt=c.nextPos,c.result;if(e=Rt,(r=Sr())!==u){if(n=[],a=Rt,46===t.charCodeAt(Rt)?(s=$,Rt++):(s=u,0===Vt&&Xt(De)),s!==u&&(o=kr())!==u?(Tt=a,a=_t(0,o)):(Rt=a,a=u),a!==u)for(;a!==u;)n.push(a),a=Rt,46===t.charCodeAt(Rt)?(s=$,Rt++):(s=u,0===Vt&&Xt(De)),s!==u&&(o=kr())!==u?(Tt=a,a=_t(0,o)):(Rt=a,a=u);else n=u;n!==u?(40===t.charCodeAt(Rt)?(a=f,Rt++):(a=u,0===Vt&&Xt(he)),a!==u?(s=Mr(),(o=yr())===u&&(o=null),Mr(),41===t.charCodeAt(Rt)?(l=p,Rt++):(l=u,0===Vt&&Xt(fe)),l!==u?(Tt=e,e=Nr("propCall",{obj:r,path:n,args:o||[]})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)}else Rt=e,e=u;return Lt[i]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l=69*Rt+44,i=Lt[l];if(i)return Rt=i.nextPos,i.result;if(e=Rt,(r=Sr())!==u){if(n=[],a=Rt,46===t.charCodeAt(Rt)?(s=$,Rt++):(s=u,0===Vt&&Xt(De)),s!==u&&(o=kr())!==u?(Tt=a,a=_t(0,o)):(Rt=a,a=u),a!==u)for(;a!==u;)n.push(a),a=Rt,46===t.charCodeAt(Rt)?(s=$,Rt++):(s=u,0===Vt&&Xt(De)),s!==u&&(o=kr())!==u?(Tt=a,a=_t(0,o)):(Rt=a,a=u);else n=u;n!==u?(Tt=e,e=Nr("prop",{obj:r,path:n})):(Rt=e,e=u)}else Rt=e,e=u;return Lt[l]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,t,r=69*Rt+45,n=Lt[r];if(n)return Rt=n.nextPos,n.result;e=Rt,(t=Sr())!==u&&(Tt=e,t=Nr("var",{name:t}));return e=t,Lt[r]={nextPos:Rt,result:e},e}())===u&&(e=Rt,40===t.charCodeAt(Rt)?(r=f,Rt++):(r=u,0===Vt&&Xt(he)),r!==u?(Mr(),(n=or())!==u?(Mr(),41===t.charCodeAt(Rt)?(a=p,Rt++):(a=u,0===Vt&&Xt(fe)),a!==u?(Tt=e,e=n):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)),Lt[s]={nextPos:Rt,result:e},e)}function lr(){var e,r=69*Rt+11,n=Lt[r];return n?(Rt=n.nextPos,n.result):((e=br())===u&&(e=mr())===u&&(e=Cr())===u&&(e=function(){var e,r,n,a,s,o=69*Rt+61,l=Lt[o];if(l)return Rt=l.nextPos,l.result;e=Rt,91===t.charCodeAt(Rt)?(r=N,Rt++):(r=u,0===Vt&&Xt(He));if(r!==u){for(Mr(),n=[],a=Rt,(s=lr())!==u?(Mr(),44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Mr(),Tt=a,a=s):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,(s=lr())!==u?(Mr(),44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Mr(),Tt=a,a=s):(Rt=a,a=u);a=Mr(),93===t.charCodeAt(Rt)?(s=D,Rt++):(s=u,0===Vt&&Xt(qe)),s!==u?(Tt=e,e=Ut(n)):(Rt=e,e=u)}else Rt=e,e=u;return Lt[o]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s,o,l,i,c=69*Rt+62,h=Lt[c];if(h)return Rt=h.nextPos,h.result;e=Rt,123===t.charCodeAt(Rt)?(r=v,Rt++):(r=u,0===Vt&&Xt(ve));if(r!==u){for(Mr(),n=[],a=Rt,(s=kr())!==u?(Mr(),58===t.charCodeAt(Rt)?(o=G,Rt++):(o=u,0===Vt&&Xt(ot)),o!==u&&Er()!==u&&(l=lr())!==u?(Mr(),44===t.charCodeAt(Rt)?(i=w,Rt++):(i=u,0===Vt&&Xt(_e)),i===u&&(59===t.charCodeAt(Rt)?(i=K,Rt++):(i=u,0===Vt&&Xt(ut))),i===u&&(i=null),Mr(),Tt=a,a=It(s,l)):(Rt=a,a=u)):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,(s=kr())!==u?(Mr(),58===t.charCodeAt(Rt)?(o=G,Rt++):(o=u,0===Vt&&Xt(ot)),o!==u&&Er()!==u&&(l=lr())!==u?(Mr(),44===t.charCodeAt(Rt)?(i=w,Rt++):(i=u,0===Vt&&Xt(_e)),i===u&&(59===t.charCodeAt(Rt)?(i=K,Rt++):(i=u,0===Vt&&Xt(ut))),i===u&&(i=null),Mr(),Tt=a,a=It(s,l)):(Rt=a,a=u)):(Rt=a,a=u);125===t.charCodeAt(Rt)?(a=d,Rt++):(a=u,0===Vt&&Xt(de)),a!==u?(Tt=e,e=zt(n)):(Rt=e,e=u)}else Rt=e,e=u;return Lt[c]={nextPos:Rt,result:e},e}())===u&&(e=Pr()),Lt[r]={nextPos:Rt,result:e},e)}function ir(){var e,r,n,a,s,o,l=69*Rt+12,i=Lt[l];return i?(Rt=i.nextPos,i.result):(e=Rt,"::"===t.substr(Rt,2)?(r="::",Rt+=2):(r=u,0===Vt&&Xt(pe)),r!==u&&Er()!==u&&(n=kr())!==u&&Er()!==u?(123===t.charCodeAt(Rt)?(a=v,Rt++):(a=u,0===Vt&&Xt(ve)),a!==u?(Mr(),(s=function(){var e,t,r,n,a,s=69*Rt+13,o=Lt[s];if(o)return Rt=o.nextPos,o.result;if(e=Rt,(t=cr())!==u){for(r=[],n=Rt,Er()!==u&&(a=cr())!==u?(Tt=n,n=mt(0,a)):(Rt=n,n=u);n!==u;)r.push(n),n=Rt,Er()!==u&&(a=cr())!==u?(Tt=n,n=mt(0,a)):(Rt=n,n=u);Tt=e,e=gt(t,r)}else Rt=e,e=u;return Lt[s]={nextPos:Rt,result:e},e}())===u&&(s=null),Mr(),125===t.charCodeAt(Rt)?(o=d,Rt++):(o=u,0===Vt&&Xt(de)),o!==u?(Tt=e,e=Nr("ns",{name:n,members:s})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),Lt[l]={nextPos:Rt,result:e},e)}function cr(){var e,t=69*Rt+14,r=Lt[t];return r?(Rt=r.nextPos,r.result):((e=hr())===u&&(e=_r())===u&&(e=ir()),Lt[t]={nextPos:Rt,result:e},e)}function hr(){var e,r,n,a,s,o=69*Rt+16,l=Lt[o];return l?(Rt=l.nextPos,l.result):(e=Rt,35===t.charCodeAt(Rt)?(r=A,Rt++):(r=u,0===Vt&&Xt(Ae)),r!==u&&(n=kr())!==u?(Mr(),61===t.charCodeAt(Rt)?(a=x,Rt++):(a=u,0===Vt&&Xt(xe)),a!==u?(Mr(),(s=or())!==u?(Tt=e,e=Nr("def",{name:n,expr:s,mut:!1,attr:[]})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(e=Rt,36===t.charCodeAt(Rt)?(r="$",Rt++):(r=u,0===Vt&&Xt(me)),r!==u&&(n=kr())!==u?(Mr(),t.substr(Rt,2)===m?(a=m,Rt+=2):(a=u,0===Vt&&Xt(ge)),a!==u?(Mr(),(s=or())!==u?(Tt=e,e=function(e,t){return Nr("def",{name:e,expr:t,mut:!0,attr:[]})}(n,s)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)),Lt[o]={nextPos:Rt,result:e},e)}function fr(){var e,r,n,a,s,o,l=69*Rt+33,i=Lt[l];if(i)return Rt=i.nextPos,i.result;if(e=Rt,r=Rt,Vt++,n=Rt,(a=function(){var e,r=69*Rt+32,n=Lt[r];return n?(Rt=n.nextPos,n.result):(t.substr(Rt,3)===b?(e=b,Rt+=3):(e=u,0===Vt&&Xt(Ce)),e===u&&(t.substr(Rt,2)===F?(e=F,Rt+=2):(e=u,0===Vt&&Xt(ze)),e===u&&(t.substr(Rt,2)===m?(e=m,Rt+=2):(e=u,0===Vt&&Xt(ge)),e===u&&(t.substr(Rt,3)===H?(e=H,Rt+=3):(e=u,0===Vt&&Xt(Fe)),e===u&&(t.substr(Rt,3)===q?(e=q,Rt+=3):(e=u,0===Vt&&Xt(Ie)))))),Lt[r]={nextPos:Rt,result:e},e)}())!==u?(s=Rt,Vt++,X.test(t.charAt(Rt))?(o=t.charAt(Rt),Rt++):(o=u,0===Vt&&Xt(Ue)),Vt--,o===u?s=void 0:(Rt=s,s=u),s!==u?n=a=[a,s]:(Rt=n,n=u)):(Rt=n,n=u),Vt--,n===u?r=void 0:(Rt=r,r=u),r!==u){if(n=[],X.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt(Ue)),a!==u)for(;a!==u;)n.push(a),X.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt(Ue));else n=u;n!==u?(Tt=e,e=Nr("operator",{op:Yt()})):(Rt=e,e=u)}else Rt=e,e=u;return Lt[l]={nextPos:Rt,result:e},e}function pr(){var e,t,r,n,a,s=69*Rt+35,o=Lt[s];if(o)return Rt=o.nextPos,o.result;if(e=Rt,(t=vr())!==u){for(r=[],n=Rt,Mr(),(a=vr())!==u?(Tt=n,n=Ot(0,a)):(Rt=n,n=u);n!==u;)r.push(n),n=Rt,Mr(),(a=vr())!==u?(Tt=n,n=Ot(0,a)):(Rt=n,n=u);Tt=e,e=gt(t,r)}else Rt=e,e=u;return Lt[s]={nextPos:Rt,result:e},e}function vr(){var e,r,n,a,s,o,l,i=69*Rt+36,c=Lt[i];if(c)return Rt=c.nextPos,c.result;if(e=Rt,t.substr(Rt,4)===z?(r=z,Rt+=4):(r=u,0===Vt&&Xt(Je)),r!==u?(n=Mr(),(a=or())!==u?(s=Mr(),(o=sr())!==u?(Tt=e,e=Et(a,o)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u){if(e=Rt,r=[],46===t.charCodeAt(Rt)?(n=$,Rt++):(n=u,0===Vt&&Xt(De)),n!==u)for(;n!==u;)r.push(n),46===t.charCodeAt(Rt)?(n=$,Rt++):(n=u,0===Vt&&Xt(De));else r=u;r!==u?(63===t.charCodeAt(Rt)?(n="?",Rt++):(n=u,0===Vt&&Xt(Te)),n!==u?(a=Mr(),(s=or())!==u?(o=Mr(),(l=sr())!==u?(Tt=e,e=Et(s,l)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)}return Lt[i]={nextPos:Rt,result:e},e}function dr(){var e,r,n,a,s=69*Rt+37,o=Lt[s];if(o)return Rt=o.nextPos,o.result;if(e=Rt,t.substr(Rt,4)===U?(r=U,Rt+=4):(r=u,0===Vt&&Xt(Ze)),r!==u?(n=Mr(),(a=sr())!==u?(Tt=e,e=a):(Rt=e,e=u)):(Rt=e,e=u),e===u){if(e=Rt,r=[],46===t.charCodeAt(Rt)?(n=$,Rt++):(n=u,0===Vt&&Xt(De)),n!==u)for(;n!==u;)r.push(n),46===t.charCodeAt(Rt)?(n=$,Rt++):(n=u,0===Vt&&Xt(De));else r=u;r!==u?(n=Mr(),(a=sr())!==u?(Tt=e,e=a):(Rt=e,e=u)):(Rt=e,e=u)}return Lt[s]={nextPos:Rt,result:e},e}function yr(){var e,r,n,a,s,o=69*Rt+41,l=Lt[o];if(l)return Rt=l.nextPos,l.result;if(e=Rt,(r=or())!==u){for(n=[],a=Rt,44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Er()!==u&&(s=or())!==u?(Tt=a,a=Nt(0,s)):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Er()!==u&&(s=or())!==u?(Tt=a,a=Nt(0,s)):(Rt=a,a=u);Tt=e,e=gt(r,n)}else Rt=e,e=u;return Lt[o]={nextPos:Rt,result:e},e}function Ar(){var e,r,n,a,s,o,l=69*Rt+46,i=Lt[l];if(i)return Rt=i.nextPos,i.result;if(e=Rt,96===t.charCodeAt(Rt)?(r=T,Rt++):(r=u,0===Vt&&Xt(Le)),r!==u){for(n=[],a=Rt,s=Rt,Vt++,96===t.charCodeAt(Rt)?(o=T,Rt++):(o=u,0===Vt&&Xt(Le)),Vt--,o===u?s=void 0:(Rt=s,s=u),s!==u&&(o=xr())!==u?(Tt=a,a=o):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,s=Rt,Vt++,96===t.charCodeAt(Rt)?(o=T,Rt++):(o=u,0===Vt&&Xt(Le)),Vt--,o===u?s=void 0:(Rt=s,s=u),s!==u&&(o=xr())!==u?(Tt=a,a=o):(Rt=a,a=u);96===t.charCodeAt(Rt)?(a=T,Rt++):(a=u,0===Vt&&Xt(Le)),a!==u?(Tt=e,e=Nr("tmpl",{tmpl:$r(n)})):(Rt=e,e=u)}else Rt=e,e=u;return Lt[l]={nextPos:Rt,result:e},e}function xr(){var e,r,n,a,s=69*Rt+47,o=Lt[s];return o?(Rt=o.nextPos,o.result):((e=function(){var e,r,n=69*Rt+48,a=Lt[n];if(a)return Rt=a.nextPos,a.result;e=Rt,t.substr(Rt,2)===J?(r=J,Rt+=2):(r=u,0===Vt&&Xt(Ye));r!==u&&(Tt=e,r=Dt());(e=r)===u&&(e=Rt,t.substr(Rt,2)===Z?(r=Z,Rt+=2):(r=u,0===Vt&&Xt(Ge)),r!==u&&(Tt=e,r=Dt()),(e=r)===u&&(e=Rt,t.substr(Rt,2)===B?(r=B,Rt+=2):(r=u,0===Vt&&Xt(Ke)),r!==u&&(Tt=e,r="`"),e=r));return Lt[n]={nextPos:Rt,result:e},e}())===u&&(e=Rt,123===t.charCodeAt(Rt)?(r=v,Rt++):(r=u,0===Vt&&Xt(ve)),r!==u?(Or(),(n=or())!==u?(Or(),125===t.charCodeAt(Rt)?(a=d,Rt++):(a=u,0===Vt&&Xt(de)),a!==u?(Tt=e,e=n):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),e===u&&(t.length>Rt?(e=t.charAt(Rt),Rt++):(e=u,0===Vt&&Xt(ie)))),Lt[s]={nextPos:Rt,result:e},e)}function mr(){var e,r,n,a,s,o,l=69*Rt+49,i=Lt[l];if(i)return Rt=i.nextPos,i.result;if(e=Rt,34===t.charCodeAt(Rt)?(r=V,Rt++):(r=u,0===Vt&&Xt(Qe)),r!==u){for(n=[],a=Rt,s=Rt,Vt++,34===t.charCodeAt(Rt)?(o=V,Rt++):(o=u,0===Vt&&Xt(Qe)),Vt--,o===u?s=void 0:(Rt=s,s=u),s!==u?((o=gr())===u&&(t.length>Rt?(o=t.charAt(Rt),Rt++):(o=u,0===Vt&&Xt(ie))),o!==u?(Tt=a,a=o):(Rt=a,a=u)):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,s=Rt,Vt++,34===t.charCodeAt(Rt)?(o=V,Rt++):(o=u,0===Vt&&Xt(Qe)),Vt--,o===u?s=void 0:(Rt=s,s=u),s!==u?((o=gr())===u&&(t.length>Rt?(o=t.charAt(Rt),Rt++):(o=u,0===Vt&&Xt(ie))),o!==u?(Tt=a,a=o):(Rt=a,a=u)):(Rt=a,a=u);34===t.charCodeAt(Rt)?(a=V,Rt++):(a=u,0===Vt&&Xt(Qe)),a!==u?(Tt=e,e=Nr("str",{value:n.join("")})):(Rt=e,e=u)}else Rt=e,e=u;return Lt[l]={nextPos:Rt,result:e},e}function gr(){var e,r,n=69*Rt+50,a=Lt[n];return a?(Rt=a.nextPos,a.result):(e=Rt,'\\"'===t.substr(Rt,2)?(r='\\"',Rt+=2):(r=u,0===Vt&&Xt(We)),r!==u&&(Tt=e,r='"'),e=r,Lt[n]={nextPos:Rt,result:e},e)}function br(){var e,r,n,a,s=69*Rt+51,o=Lt[s];if(o)return Rt=o.nextPos,o.result;if(e=Rt,ee.test(t.charAt(Rt))?(t.charAt(Rt),Rt++):0===Vt&&Xt(Xe),te.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(et)),r!==u){if(n=[],re.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt(tt)),a!==u)for(;a!==u;)n.push(a),re.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt(tt));else n=u;n!==u?(Tt=e,e=Ht()):(Rt=e,e=u)}else Rt=e,e=u;return e===u&&(e=Rt,ee.test(t.charAt(Rt))?(t.charAt(Rt),Rt++):0===Vt&&Xt(Xe),re.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(tt)),r!==u?(Tt=e,e=Ht()):(Rt=e,e=u)),Lt[s]={nextPos:Rt,result:e},e}function Cr(){var e,r=69*Rt+52,n=Lt[r];return n?(Rt=n.nextPos,n.result):((e=function(){var e,r,n,a,s=69*Rt+53,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,t.substr(Rt,3)===L?(r=L,Rt+=3):(r=u,0===Vt&&Xt(rt));r!==u?(n=Rt,Vt++,W.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt($e)),Vt--,a===u?n=void 0:(Rt=n,n=u),n!==u?(Tt=e,e=qt()):(Rt=e,e=u)):(Rt=e,e=u);e===u&&(e=Rt,43===t.charCodeAt(Rt)?(r=C,Rt++):(r=u,0===Vt&&Xt(Pe)),r!==u?(n=Rt,Vt++,W.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt($e)),Vt--,a===u?n=void 0:(Rt=n,n=u),n!==u?(Tt=e,e=qt()):(Rt=e,e=u)):(Rt=e,e=u));return Lt[s]={nextPos:Rt,result:e},e}())===u&&(e=function(){var e,r,n,a,s=69*Rt+54,o=Lt[s];if(o)return Rt=o.nextPos,o.result;e=Rt,t.substr(Rt,2)===Y?(r=Y,Rt+=2):(r=u,0===Vt&&Xt(nt));r!==u?(n=Rt,Vt++,W.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt($e)),Vt--,a===u?n=void 0:(Rt=n,n=u),n!==u?(Tt=e,e=Ft()):(Rt=e,e=u)):(Rt=e,e=u);e===u&&(e=Rt,45===t.charCodeAt(Rt)?(r="-",Rt++):(r=u,0===Vt&&Xt(at)),r!==u?(n=Rt,Vt++,W.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt($e)),Vt--,a===u?n=void 0:(Rt=n,n=u),n!==u?(Tt=e,e=Ft()):(Rt=e,e=u)):(Rt=e,e=u));return Lt[s]={nextPos:Rt,result:e},e}()),Lt[r]={nextPos:Rt,result:e},e)}function Pr(){var e,r,n,a,s=69*Rt+55,o=Lt[s];return o?(Rt=o.nextPos,o.result):(e=Rt,95===t.charCodeAt(Rt)?(r="_",Rt++):(r=u,0===Vt&&Xt(st)),r!==u?(n=Rt,Vt++,W.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt($e)),Vt--,a===u?n=void 0:(Rt=n,n=u),n!==u?(Tt=e,e=Nr("null",{})):(Rt=e,e=u)):(Rt=e,e=u),Lt[s]={nextPos:Rt,result:e},e)}function wr(){var e,r,n,a,s,o=69*Rt+58,l=Lt[o];if(l)return Rt=l.nextPos,l.result;if(e=Rt,(r=kr())!==u){for(n=[],a=Rt,44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Er()!==u&&(s=kr())!==u?(Tt=a,a=_t(0,s)):(Rt=a,a=u);a!==u;)n.push(a),a=Rt,44===t.charCodeAt(Rt)?Rt++:0===Vt&&Xt(_e),Er()!==u&&(s=kr())!==u?(Tt=a,a=_t(0,s)):(Rt=a,a=u);Tt=e,e=gt(r,n)}else Rt=e,e=u;return Lt[o]={nextPos:Rt,result:e},e}function _r(){var e,r,n,a,s,o,l,i,c,h=69*Rt+59,y=Lt[h];return y?(Rt=y.nextPos,y.result):(e=Rt,64===t.charCodeAt(Rt)?(r="@",Rt++):(r=u,0===Vt&&Xt(lt)),r!==u&&(n=kr())!==u?(40===t.charCodeAt(Rt)?(a=f,Rt++):(a=u,0===Vt&&Xt(he)),a!==u?(Mr(),(s=wr())===u&&(s=null),Mr(),41===t.charCodeAt(Rt)?(o=p,Rt++):(o=u,0===Vt&&Xt(fe)),o!==u?(Mr(),123===t.charCodeAt(Rt)?(l=v,Rt++):(l=u,0===Vt&&Xt(ve)),l!==u?(Mr(),(i=nr())===u&&(i=null),Mr(),125===t.charCodeAt(Rt)?(c=d,Rt++):(c=u,0===Vt&&Xt(de)),c!==u?(Tt=e,e=Nr("def",{name:n,expr:Nr("fn",{args:s},i||[]),mut:!1,attr:[]})):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u)):(Rt=e,e=u),Lt[h]={nextPos:Rt,result:e},e)}function kr(){var e,r,n,a,s=69*Rt+63,o=Lt[s];if(o)return Rt=o.nextPos,o.result;if(e=Rt,ae.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(ct)),r!==u){for(n=[],se.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt(ht));a!==u;)n.push(a),se.test(t.charAt(Rt))?(a=t.charAt(Rt),Rt++):(a=u,0===Vt&&Xt(ht));Tt=e,e=At()}else Rt=e,e=u;return Lt[s]={nextPos:Rt,result:e},e}function Sr(){var e,r,n,a,s,o=69*Rt+64,l=Lt[o];if(l)return Rt=l.nextPos,l.result;if(e=Rt,kr()!==u){for(r=[],n=Rt,58===t.charCodeAt(Rt)?(a=G,Rt++):(a=u,0===Vt&&Xt(ot)),a!==u&&(s=kr())!==u?n=a=[a,s]:(Rt=n,n=u);n!==u;)r.push(n),n=Rt,58===t.charCodeAt(Rt)?(a=G,Rt++):(a=u,0===Vt&&Xt(ot)),a!==u&&(s=kr())!==u?n=a=[a,s]:(Rt=n,n=u);Tt=e,e=At()}else Rt=e,e=u;return Lt[o]={nextPos:Rt,result:e},e}function jr(){var e,r,n=69*Rt+65,a=Lt[n];return a?(Rt=a.nextPos,a.result):(e=Rt,Vt++,t.length>Rt?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(ie)),Vt--,r===u?e=void 0:(Rt=e,e=u),e===u&&("\r\n"===t.substr(Rt,2)?(e="\r\n",Rt+=2):(e=u,0===Vt&&Xt(ft)),e===u&&(oe.test(t.charAt(Rt))?(e=t.charAt(Rt),Rt++):(e=u,0===Vt&&Xt(pt)))),Lt[n]={nextPos:Rt,result:e},e)}function Mr(){var e,r,n=69*Rt+66,a=Lt[n];if(a)return Rt=a.nextPos,a.result;for(e=[],ue.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(vt));r!==u;)e.push(r),ue.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(vt));return Lt[n]={nextPos:Rt,result:e},e}function Or(){var e,r,n=69*Rt+67,a=Lt[n];if(a)return Rt=a.nextPos,a.result;for(e=[],le.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(dt));r!==u;)e.push(r),le.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(dt));return Lt[n]={nextPos:Rt,result:e},e}function Er(){var e,r,n=69*Rt+68,a=Lt[n];if(a)return Rt=a.nextPos,a.result;if(e=[],ue.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(vt)),r!==u)for(;r!==u;)e.push(r),ue.test(t.charAt(Rt))?(r=t.charAt(Rt),Rt++):(r=u,0===Vt&&Xt(vt));else e=u;return Lt[n]={nextPos:Rt,result:e},e}function $r(e){let t=function(e,t){const r=[];for(let n=0;n<e.length;n++)0!=n&&t(e[n-1],e[n])?r[r.length-1].push(e[n]):r.push([e[n]]);return r}(e,((e,t)=>typeof t==typeof e));return t=t.map((e=>"string"==typeof e[0]?[e.join("")]:e)),function(e){return e.reduce(((e,t)=>e.concat(t)),[])}(t)}function Nr(e,t,r){const n={type:e};t.children=r;for(const s of Object.keys(t))void 0!==t[s]&&(n[s]=t[s]);const a=Wt(Tt,Rt);return n.loc={start:a.start.offset,end:a.end.offset-1},n}if((n=c())!==u&&Rt===t.length)return n;throw n!==u&&Rt<t.length&&Xt({type:"end"}),a=Bt,s=Zt<t.length?t.charAt(Zt):null,o=Zt<t.length?Wt(Zt,Zt+1):Wt(Zt,Zt),new ne(ne.buildMessage(a,s),a,s,o)}};function se(e){const t=[],r=[];for(const n of e)if("attr"==n.type)r.push(n);else if("def"==n.type)n.attr.push(...r),r.splice(0,r.length),"fn"==n.expr.type&&(n.expr.children=se(n.expr.children)),t.push(n);else{if(r.length>0)throw new pe("invalid attribute.");switch(n.type){case"fn":n.children=se(n.children);break;case"block":n.statements=se(n.statements)}t.push(n)}if(r.length>0)throw new pe("invalid attribute.");return t}const oe=["_","yes","no","true","false","each","for","loop","while","break","continue","match","if","elif","else","return"];function ue(e){var t;for(const r of e)switch(r.type){case"def":case"assign":case"ns":if(oe.includes(r.name))throw new pe(`Reserved word "${r.name}" cannot be used as variable name.`);break;case"fn":ue(r.children);break;case"block":ue(r.statements);break;case"if":"block"==r.then.type&&ue(r.then.statements);for(const e of r.elseif)"block"==e.then.type&&ue(e.then.statements);"block"==(null==(t=r.else)?void 0:t.type)&&ue(r.else.statements)}return e}function le(e){ue(e.nodes);return se(e.nodes)}const ie={def:0,assign:1,call:2,return:3,if:4,for:5,forOf:6,var:7,null:8,bool:9,num:10,str:11,arr:12,fn:13,obj:14,prop:15,propCall:16,index:17,block:18,tmpl:19,ns:20,match:21,meta:22,propAssign:23,indexAssign:24,inc:25,dec:26,attr:27,break:28,loop:29,continue:30,infix:31,operator:32};function ce(e){if(null==e)return null;switch(e.type){case"def":return[ie[e.type],e.name,e.mut,ce(e.expr),he(e.attr)];case"assign":return[ie[e.type],e.name,ce(e.expr)];case"call":return[ie[e.type],e.name,he(e.args)];case"return":return[ie[e.type],ce(e.expr)];case"if":return[ie[e.type],ce(e.cond),ce(e.then),e.elseif.map((e=>[ce(e.cond),ce(e.then)])),ce(e.else)];case"for":return[ie[e.type],e.var,ce(e.from),ce(e.to),ce(e.times),ce(e.for)];case"forOf":return[ie[e.type],e.var,ce(e.items),ce(e.for)];case"var":return[ie[e.type],e.name];case"null":return[ie[e.type]];case"bool":case"num":case"str":return[ie[e.type],e.value];case"arr":return[ie[e.type],he(e.value)];case"fn":return[ie[e.type],e.args,he(e.children)];case"obj":return[ie[e.type],Array.from(e.value.entries()).map((e=>[e[0],ce(e[1])]))];case"prop":return[ie[e.type],e.obj,e.path];case"propCall":return[ie[e.type],e.obj,e.path,he(e.args)];case"index":return[ie[e.type],e.arr,ce(e.i)];case"block":return[ie[e.type],he(e.statements)];case"tmpl":return[ie[e.type],e.tmpl.map((e=>"string"==typeof e?e:ce(e)))];case"ns":return[ie[e.type],e.name,he(e.members)];case"match":return[ie[e.type],ce(e.about),e.qs.map((e=>[ce(e.q),ce(e.a)])),ce(e.default)];case"meta":return[ie[e.type],e.name,ce(e.value)];case"propAssign":return[ie[e.type],e.obj,e.path,ce(e.expr)];case"indexAssign":return[ie[e.type],e.arr,ce(e.i),ce(e.expr)];case"inc":case"dec":return[ie[e.type],e.name,ce(e.expr)];case"attr":return[ie[e.type],e.name,ce(e.value)];case"break":return[ie[e.type],null];case"loop":return[ie[e.type],he(e.statements)];case"continue":return[ie[e.type],null];case"infix":return[ie[e.type],he(e.operands),he(e.operators)];case"operator":return[ie[e.type],e.op]}}function he(e){return e.map((e=>ce(e)))}class fe extends Error{constructor(e){let t="Syntax error.";e&&(t+=` ${e}`),super(t)}}class pe extends Error{constructor(e){let t="Semantic error.";e&&(t+=` ${e}`),super(t)}}const ve={id:"root"},de=A("h1",null,"AiScript (v0.11.1) Playground",-1),ye={id:"grid1"},Ae={id:"editor",class:"container"},xe=P("Input"),me={key:0,class:"syntaxError"},ge={id:"logs",class:"container"},be=A("header",null,"Output",-1),Ce={class:"type"},Pe={id:"grid2"},we={id:"ast",class:"container"},_e=A("header",null,"AST",-1),ke={id:"bin",class:"container"},Se=A("header",null,"Bytecode",-1),je=A("div",{id:"debugger",class:"container"},[A("header",null,"Debugger"),A("div")],-1);k({setup(e){const t=p(window.localStorage.getItem("script")||'<: "Hello, AiScript!"'),r=p(null),n=p(null),a=p([]),s=p(!1);v(t,(()=>{window.localStorage.setItem("script",t.value);try{r.value=le(function(e){let t;try{t=(void 0)(e)}catch(r){if(r.location)throw new fe(`Line ${r.location.start.line}:${r.location.start.column}`);throw r}return{nodes:t}}(t.value)),s.value=!1}catch(e){return s.value=!0,void console.error(e)}n.value=he(r.value)}),{immediate:!0});const o=()=>{t.value='for (#i, 100) {\n  <: if ((i % 15) = 0) "FizzBuzz"\n    elif ((i % 3) = 0) "Fizz"\n    elif ((i % 5) = 0) "Buzz"\n    else i\n}'},u=async()=>{a.value=[];const e=new re({},{in:e=>new Promise((t=>{t(window.prompt(e))})),out:e=>{a.value.push({id:Math.random(),type:e.type,text:"str"===e.type||"num"===e.type?e.value:G(e),print:!0})},log:(e,t)=>{switch(e){case"end":a.value.push({id:Math.random(),text:G(t.val,!0),print:!1})}}});try{await e.exec(r.value)}catch(t){console.error(t),window.alert("Error: "+t)}},l=e=>w.exports.highlight(e,w.exports.languages.js,"javascript");return(e,i)=>(d(),y("div",ve,[de,A("div",ye,[A("div",Ae,[A("header",null,[xe,A("div",{class:"actions"},[A("button",{onClick:o},"FizzBuzz")])]),A("div",null,[A(x(_),{class:"code",modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=e=>t.value=e),highlight:l,"line-numbers":!1},null,8,["modelValue"])]),A("footer",null,[s.value?(d(),y("span",me,"Syntax Error!")):m("",!0),A("div",{class:"actions"},[A("button",{onClick:u},"RUN")])])]),A("div",ge,[be,A("div",null,[(d(!0),y(g,null,b(a.value,(e=>(d(),y("div",{class:["log",[{print:e.print},e.type]],key:e.id},[A("span",Ce,C(e.type),1),P(" "+C(e.text),1)],2)))),128))])])]),A("div",Pe,[A("div",we,[_e,A("div",null,[A("pre",null,C(JSON.stringify(r.value,null,"\t")),1)])]),A("div",ke,[Se,A("div",null,[A("code",null,C(JSON.stringify(n.value)),1)])]),je])]))}}).mount("#app");
